<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestion des Ressources</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <style>
      :root {
        --primary-color: #4a90e2;
        --secondary-color: #6c757d;
        --success-color: #28a745;
        --danger-color: #dc3545;
      }

      body {
        background: #f5f7fa;
        min-height: 100vh;
        padding: 2rem 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .header-section {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .header-section h1 {
        color: #333;
        font-weight: 700;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .header-section h1 i {
        color: var(--primary-color);
      }

      .add-btn {
        background: linear-gradient(135deg, #667eea 0%, #3799e9 100%);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 10px;
        color: white;
        font-weight: 600;
        transition: transform 0.3s, box-shadow 0.3s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .add-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        color: white;
      }

      .resource-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .resource-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
      }

      .resource-cover {
        width: 100%;
        height: 300px;
        object-fit: cover;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 5rem;
        color: #667eea;
      }

      .resource-cover img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .resource-body {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
      }

      .resource-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #333;
        margin-bottom: 0.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .resource-author {
        color: #6c757d;
        font-size: 0.95rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .resource-type {
        display: inline-block;
        padding: 0.35rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .type-LIVRE {
        background: #e3f2fd;
        color: #1976d2;
      }
      .type-DOCUMENT {
        background: #f3e5f5;
        color: #7b1fa2;
      }
      .type-CD {
        background: #fff3e0;
        color: #f57c00;
      }
      .type-DVD {
        background: #fce4ec;
        color: #c2185b;
      }
      .type-REVUE {
        background: #e8f5e9;
        color: #388e3c;
      }

      .resource-actions {
        display: flex;
        gap: 0.5rem;
        margin-top: auto;
      }

      .action-btn {
        flex: 1;
        padding: 0.5rem;
        border: none;
        border-radius: 8px;
        font-size: 0.85rem;
        font-weight: 600;
        transition: all 0.3s;
        text-decoration: none;
        text-align: center;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.3rem;
      }

      .btn-edit {
        background: #4a90e2;
        color: white;
      }

      .btn-edit:hover {
        background: #357abd;
        color: white;
        transform: scale(1.05);
      }

      .btn-delete {
        background: #dc3545;
        color: white;
      }

      .btn-delete:hover {
        background: #c82333;
        color: white;
        transform: scale(1.05);
      }

      .btn-exemplaires {
        background: #28a745;
        color: white;
      }

      .btn-exemplaires:hover {
        background: #218838;
        color: white;
        transform: scale(1.05);
      }

      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .empty-state i {
        font-size: 5rem;
        color: #ccc;
        margin-bottom: 1rem;
      }

      .empty-state h3 {
        color: #666;
        margin-bottom: 1rem;
      }

      @media (max-width: 768px) {
        .resource-actions {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="main-container">
      <div class="header-section">
        <div
          class="d-flex justify-content-between align-items-center flex-wrap gap-3"
        >
          <h1>
            <i class="bi bi-collection"></i>
            Resource Library
          </h1>
          <a href="/ressources/add" class="add-btn">
            <i class="bi bi-plus-circle"></i>
            Add a resource
          </a>
        </div>
      </div>

      <div class="row g-4" th:if="${ressources != null and !ressources.empty}">
        <div
          class="col-12 col-sm-6 col-md-4 col-lg-3"
          th:each="r : ${ressources}"
        >
          <div class="resource-card">
            <div class="resource-cover">
              <img
                th:if="${r.coverPath != null}"
                th:src="@{/ressources/cover/{id}(id=${r.id})}"
                th:alt="${r.titre}"
              />
              <i
                th:unless="${r.coverPath != null}"
                th:class="${r.typeRessource == 'LIVRE' ? 'bi bi-book' : 
                                      r.typeRessource == 'DOCUMENT' ? 'bi bi-file-text' :
                                      r.typeRessource == 'CD' ? 'bi bi-disc' :
                                      r.typeRessource == 'DVD' ? 'bi bi-camera-reels' :
                                      'bi bi-journal'}"
              ></i>
            </div>
            <div class="resource-body">
              <h3 class="resource-title" th:text="${r.titre}">Title</h3>
              <div class="resource-author">
                <i class="bi bi-person"></i>
                <span th:text="${r.auteur}">Author</span>
              </div>
              <span
                class="resource-type"
                th:classappend="'type-' + ${r.typeRessource}"
                th:text="${r.typeRessource}"
                >Type</span
              >

              <div class="resource-actions">
                <a
                  th:href="@{'/ressources/edit/' + ${r.id}}"
                  class="action-btn btn-edit"
                >
                  <i class="bi bi-pencil"></i>
                  Edit
                </a>
                <a
                  th:href="@{'/ressources/delete/' + ${r.id}}"
                  class="action-btn btn-delete"
                  onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette ressource ?');"
                >
                  <i class="bi bi-trash"></i>
                  Delete
                </a>
              </div>
              <div class="resource-actions mt-2">
                <a
                  th:href="@{'/exemplaires/add/' + ${r.id}}"
                  class="action-btn btn-exemplaires"
                >
                  <i class="bi bi-stack"></i>
                  Add Physical copy
                </a>
              </div>
              <div class="resource-actions mt-2">
                <a
                  th:href="@{'/exemplaires/ressource/' + ${r.id}}"
                  class="action-btn btn-exemplaires"
                >
                  <i class="bi bi-stack"></i>
                  View copies
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="empty-state"
        th:if="${ressources == null or ressources.empty}"
      >
        <i class="bi bi-inbox"></i>
        <h3>No resources available</h3>
        <p class="text-muted">Start by adding your first resource</p>
        <a href="/ressources/add" class="add-btn mt-3">
          <i class="bi bi-plus-circle"></i>
          Add a resource
        </a>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
